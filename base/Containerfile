FROM quay.io/fedora/fedora-coreos:stable

# Add Tailscale
RUN cd /etc/yum.repos.d/ && \
    curl -LO https://pkgs.tailscale.com/stable/fedora/tailscale.repo && \
    rpm-ostree install tailscale && \
    systemctl enable tailscaled && \
    ostree container commit

# Add cloudflared (Cloudflare Tunnels)
RUN curl -fsSl https://pkg.cloudflare.com/cloudflared-ascii.repo > /etc/yum.repos.d/cloudflared.repo && \
    dnf update  && \
    dnf install cloudflared && \
    ostree container commit
